---
import BaseHead from '../components/BaseHead.astro'
import Header from '../components/Header.astro'
import Footer from '../components/Footer.astro'
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts'
import { getCollection } from 'astro:content'
import FormattedDate from '../components/FormattedDate.astro'
import { resolve } from '../urls'

const posts = (await getCollection('articles')).sort(
  (a, b) => a.data.pubDate.valueOf() - b.data.pubDate.valueOf(),
)
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
  </head>
  <body class="w-full bg-zinc-900 text-slate-100">
    <Header />
    <main class="m-auto max-w-3xl px-6 py-6">
      <section>
        <ul>
          {
            posts.map((post) => (
              <li class="py-10">
                <a href={resolve('article/' + post.slug)}>
                  <img
                    width={1020}
                    height={510}
                    src={
                      post.data.heroImage ? resolve(post.data.heroImage) : ''
                    }
                    alt=""
                  />
                  <div class="flex w-full justify-between pt-3">
                    <h4 class="text-3xl text-white">{post.data.title}</h4>
                    <p class="mb-2 text-slate-300">
                      <FormattedDate date={post.data.pubDate} />
                    </p>
                  </div>
                </a>
              </li>
            ))
          }
        </ul>
      </section>
    </main>
    <Footer />
  </body>
</html>
